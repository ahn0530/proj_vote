<% layout('layouts/boilerplate') %>

<div class="carousel">
    <div class="carousel-inner">
        <% carouselItems.forEach((item, index) => { %>
            <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                <div class="carousel-caption">
                    <h3><%= item.title %></h3>
                </div>
            </div>
        <% }); %>
    </div>
    <a class="carousel-control carousel-control-prev" href="#" role="button">&#10094;</a>
    <a class="carousel-control carousel-control-next" href="#" role="button">&#10095;</a>
    <div class="carousel-indicators">
        <% carouselItems.forEach((_, index) => { %>
            <span class="<%= index === 0 ? 'active' : '' %>"></span>
        <% }); %>
    </div>
</div>

<div class="project-story">
    <h2><%= projectStory.title %></h2>
    <div class="story-content">
        <%- projectStory.content %>
    </div>
</div>

<script>
    const items = document.querySelectorAll('.carousel-item');
    const indicators = document.querySelectorAll('.carousel-indicators span');
    const prevButton = document.querySelector('.carousel-control-prev');
    const nextButton = document.querySelector('.carousel-control-next');
    let currentIndex = 0;

    function showItem(index) {
        items[currentIndex].classList.remove('active');
        indicators[currentIndex].classList.remove('active');
        items[index].classList.add('active');
        indicators[index].classList.add('active');
        currentIndex = index;
    }

    prevButton.addEventListener('click', () => {
        let index = currentIndex - 1;
        if (index < 0) index = items.length - 1;
        showItem(index);
    });

    nextButton.addEventListener('click', () => {
        let index = currentIndex + 1;
        if (index >= items.length) index = 0;
        showItem(index);
    });

    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => showItem(index));
    });
</script>
